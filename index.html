<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>√îN T·ª™ V·ª∞NG ‚Äì L·ªöP 2</title>
    <style>
      :root {
        --bg: #f8fafc;
        --card: #ffffff;
        --text: #0f172a;
        --muted: #64748b;
        --primary: #2563eb;
        --primary-contrast: #ffffff;
        --green: #16a34a;
        --red: #dc2626;
        --border: #e2e8f0;
        --shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
        --focus: 2px solid #2563eb;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, "Noto Sans", sans-serif;
        background: var(--bg);
        color: var(--text);
        -webkit-font-smoothing: antialiased;
        line-height: 1.5;
      }
      .app {
        max-width: 900px;
        margin: 0 auto;
        padding: 16px;
      }
      .header {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
      }
      .title {
        font-weight: 800;
        letter-spacing: 0.5px;
        font-size: clamp(18px, 2.5vw, 24px);
      }
      .header-right {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }
      .progress-info {
        font-weight: 600;
        color: var(--muted);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .progress {
        width: 100%;
        height: 12px;
        background: #e5e7eb;
        border-radius: 999px;
        overflow: hidden;
        margin-bottom: 16px;
      }
      .bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #34d399, #60a5fa);
        transition: width 300ms ease;
      }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: var(--shadow);
        padding: clamp(16px, 3vw, 28px);
        display: flex;
        flex-direction: column;
        gap: 14px;
        align-items: center;
      }
      .emoji {
        font-size: clamp(48px, 10vw, 96px);
        line-height: 1;
        cursor: pointer;
        user-select: none;
      }
      .word-row {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .word {
        margin: 0;
        font-size: clamp(28px, 6vw, 54px);
        font-weight: 800;
        letter-spacing: 0.5px;
        cursor: pointer;
      }
      .instruction {
        margin: 2px 0 8px 0;
        color: var(--muted);
        font-weight: 600;
      }
      .speak-btn {
        background: var(--primary);
        color: var(--primary-contrast);
        border: none;
        padding: 10px 14px;
        border-radius: 999px;
        font-weight: 700;
        letter-spacing: 0.3px;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
      }
      .speak-btn[disabled] {
        opacity: 0.6;
        cursor: not-allowed;
        box-shadow: none;
      }
      .answers {
        margin-top: 4px;
        width: 100%;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      .answer-btn {
        width: 100%;
        text-align: left;
        background: #f1f5f9;
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 14px 14px;
        font-size: clamp(16px, 3.5vw, 20px);
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: transform 120ms ease, background 120ms ease,
          border-color 120ms ease;
        min-height: 60px;
      }
      .answer-btn:hover {
        transform: translateY(-1px);
      }
      .answer-btn:active {
        transform: translateY(0);
      }
      .answer-btn:focus-visible {
        outline: var(--focus);
        outline-offset: 2px;
      }
      .answer-btn[disabled] {
        cursor: default;
        opacity: 0.95;
      }
      .answer-label {
        display: inline-grid;
        place-items: center;
        width: 34px;
        height: 34px;
        border-radius: 10px;
        background: #e2e8f0;
        color: #111827;
        font-weight: 800;
        flex: 0 0 34px;
      }
      .answer-text {
        flex: 1;
      }
      .answer-btn.correct {
        background: #ecfdf5;
        border-color: #34d399;
      }
      .answer-btn.correct .answer-label {
        background: #34d399;
        color: #04210f;
      }
      .answer-btn.incorrect {
        background: #fef2f2;
        border-color: #f87171;
      }
      .answer-btn.incorrect .answer-label {
        background: #f87171;
        color: #2a0a0a;
      }
      .feedback {
        min-height: 28px;
        font-weight: 800;
        font-size: clamp(16px, 3.5vw, 20px);
      }
      .feedback.ok {
        color: var(--green);
      }
      .feedback.no {
        color: var(--red);
      }
      .next-btn,
      .restart-btn {
        margin-top: 6px;
        background: #10b981;
        color: #022c22;
        border: none;
        border-radius: 999px;
        padding: 12px 20px;
        font-weight: 800;
        cursor: pointer;
        font-size: clamp(16px, 3.5vw, 18px);
        box-shadow: 0 6px 14px rgba(16, 185, 129, 0.3);
      }
      .next-btn[disabled] {
        opacity: 0.6;
        cursor: not-allowed;
        box-shadow: none;
      }
      .end {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: var(--shadow);
        padding: clamp(16px, 3vw, 28px);
        text-align: center;
      }
      .hidden {
        display: none;
      }
      .answer-key {
        width: 100%;
        border-collapse: collapse;
        margin: 12px 0 16px 0;
        font-size: clamp(14px, 2.8vw, 16px);
      }
      .answer-key th,
      .answer-key td {
        border: 1px solid var(--border);
        padding: 10px;
      }
      .answer-key thead th {
        background: #f8fafc;
        text-align: center;
      }
      .table-wrap {
        overflow: auto;
        border-radius: 12px;
        border: 1px solid var(--border);
      }
      .sound-toggle {
        background: #e2e8f0;
        color: #111827;
        border: none;
        padding: 8px 12px;
        border-radius: 999px;
        font-weight: 800;
        cursor: pointer;
      }
      .sound-toggle[aria-pressed="true"] {
        background: #111827;
        color: #fff;
      }
      .note {
        color: var(--muted);
        font-size: 14px;
      }
      @media (min-width: 700px) {
        .answers {
          grid-template-columns: repeat(2, minmax(240px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header class="header" role="banner">
        <div class="title">√îN T·ª™ V·ª∞NG ‚Äì L·ªöP 2</div>
        <div class="header-right">
          <button
            id="soundToggle"
            class="sound-toggle"
            aria-pressed="true"
            title="B·∫≠t/T·∫Øt √¢m thanh UI (kh√¥ng ·∫£nh h∆∞·ªüng Ph√°t √¢m)"
          >
            üîä √Çm thanh
          </button>
          <div class="progress-info">
            <span id="progressText">C√¢u 1/5</span>
            <span aria-hidden="true">‚Ä¢</span>
            <span id="scoreText">ƒêi·ªÉm: 0</span>
          </div>
        </div>
      </header>

      <div class="progress" aria-hidden="true">
        <div id="progressBar" class="bar"></div>
      </div>

      <main id="main" role="main" aria-live="polite" aria-atomic="false">
        <section id="quizCard" class="card">
          <div id="emoji" class="emoji" role="img" aria-label=""></div>
          <div class="word-row">
            <h1
              id="englishWord"
              class="word"
              tabindex="0"
              aria-label="T·ª´ ti·∫øng Anh, b·∫•m ƒë·ªÉ ph√°t √¢m"
            ></h1>
            <button
              id="speakBtn"
              class="speak-btn"
              type="button"
              title="Ph√°t √¢m t·ª´ ti·∫øng Anh"
            >
              üîà Ph√°t √¢m
            </button>
          </div>
          <p class="instruction">Ch·ªçn nghƒ©a ti·∫øng Vi·ªát ƒë√∫ng.</p>
          <div
            id="answers"
            class="answers"
            role="group"
            aria-label="C√°c l·ª±a ch·ªçn tr·∫£ l·ªùi"
          ></div>
          <div id="feedback" class="feedback" aria-live="polite"></div>
          <button id="nextBtn" class="next-btn" type="button" disabled>
            Ti·∫øp t·ª•c ‚ñ∂
          </button>
          <p id="ttsFallback" class="note hidden">
            Ph√°t √¢m kh√¥ng kh·∫£ d·ª•ng tr√™n tr√¨nh duy·ªát n√†y.
          </p>
        </section>

        <section id="endScreen" class="end hidden" aria-live="polite">
          <h2>Ho√†n th√†nh!</h2>
          <p
            id="finalScore"
            style="font-weight: 800; font-size: 20px; margin-top: 6px"
          >
            B·∫°n ƒë∆∞·ª£c 0/5 ƒëi·ªÉm
          </p>
          <div class="table-wrap" role="region" aria-label="B·∫£ng ƒë√°p √°n ƒë√∫ng">
            <table class="answer-key">
              <thead>
                <tr>
                  <th>Ti·∫øng Anh</th>
                  <th>Emoji</th>
                  <th>Nghƒ©a ti·∫øng Vi·ªát (ƒë√∫ng)</th>
                </tr>
              </thead>
              <tbody id="answerKeyBody"></tbody>
            </table>
          </div>
          <button id="restartBtn" class="restart-btn" type="button">
            üîÅ Ch∆°i l·∫°i
          </button>
        </section>
      </main>
    </div>

    <script>
      /*
  Tr√≤ ch∆°i √îN T·ª™ V·ª∞NG ‚Äì L·ªöP 2 (Demo 5 c√¢u)
  - M·ªôt file HTML ch·∫°y offline.
  - Kh√¥ng d√πng th∆∞ vi·ªán ngo√†i.
  - TTS (Web Speech API) ph√°t √¢m ti·∫øng Anh ch·∫≠m, r√µ.
  - √Çm b√°o ƒë√∫ng/sai t·∫°o b·∫±ng Web Audio API.
  - M·ªói c√¢u: x√°o tr·ªôn ƒë√°p √°n, ch·ªçn 1 l·∫ßn, hi·ªán ph·∫£n h·ªìi, b·∫•m "Ti·∫øp t·ª•c".
  - M√†n h√¨nh cu·ªëi: t·ªïng ƒëi·ªÉm + b·∫£ng ƒë√°p √°n + n√∫t "Ch∆°i l·∫°i".

  C√°ch th√™m c√¢u h·ªèi sau n√†y:
    1) Ch·ªânh s·ª≠a file questions.json ƒë·ªÉ th√™m c√¢u h·ªèi m·ªõi theo m·∫´u:
       { "english": "juice", "emoji": "üßÉ", "options": ["n∆∞·ªõc √©p", "s·ªØa", "n∆∞·ªõc", "tr√†"], "correctIndex": 0 }
    2) ƒê·∫£m b·∫£o c√≥ ƒë√∫ng 4 l·ª±a ch·ªçn v√† correctIndex tr·ªè t·ªõi v·ªã tr√≠ ƒë√°p √°n ƒë√∫ng (0..3).
    3) Refresh trang ƒë·ªÉ load c√¢u h·ªèi m·ªõi.
*/

      let QUESTIONS = []; // S·∫Ω ƒë∆∞·ª£c load t·ª´ file JSON

      const els = {
        progressText: document.getElementById("progressText"),
        scoreText: document.getElementById("scoreText"),
        progressBar: document.getElementById("progressBar"),
        quizCard: document.getElementById("quizCard"),
        endScreen: document.getElementById("endScreen"),
        emoji: document.getElementById("emoji"),
        englishWord: document.getElementById("englishWord"),
        speakBtn: document.getElementById("speakBtn"),
        answers: document.getElementById("answers"),
        feedback: document.getElementById("feedback"),
        nextBtn: document.getElementById("nextBtn"),
        finalScore: document.getElementById("finalScore"),
        answerKeyBody: document.getElementById("answerKeyBody"),
        restartBtn: document.getElementById("restartBtn"),
        soundToggle: document.getElementById("soundToggle"),
        ttsFallback: document.getElementById("ttsFallback"),
      };

      let currentIndex = 0;
      let score = 0;
      let answered = false;
      let uiSoundEnabled = true;
      let preparedOptions = [];

      // ========= TTS (Web Speech API) =========
      let ttsSupported =
        "speechSynthesis" in window && "SpeechSynthesisUtterance" in window;
      let selectedVoice = null;
      let speaking = false;

      function pickEnglishVoice() {
        if (!ttsSupported) return;
        const voices = window.speechSynthesis.getVoices();
        const preferred = voices.find(
          (v) => v.lang && v.lang.toLowerCase().startsWith("en-us")
        );
        if (preferred) {
          selectedVoice = preferred;
          return;
        }
        const anyEn = voices.find(
          (v) => v.lang && v.lang.toLowerCase().startsWith("en")
        );
        if (anyEn) {
          selectedVoice = anyEn;
          return;
        }
        selectedVoice = null;
      }

      if (ttsSupported) {
        window.speechSynthesis.addEventListener(
          "voiceschanged",
          pickEnglishVoice
        );
        pickEnglishVoice();
      } else {
        els.speakBtn.disabled = true;
        els.ttsFallback.classList.remove("hidden");
      }

      function speak(text) {
        if (!ttsSupported || !text) return;
        try {
          if (speaking) {
            window.speechSynthesis.cancel();
            speaking = false;
          }
          const u = new SpeechSynthesisUtterance(text);
          u.lang = "en-US";
          u.rate = 0.85; // ch·∫≠m h∆°n m·ªôt ch√∫t cho HS l·ªõp 2
          u.pitch = 1.0;
          if (selectedVoice) u.voice = selectedVoice;
          u.onstart = () => {
            speaking = true;
            els.speakBtn.disabled = true;
          };
          u.onend = () => {
            speaking = false;
            els.speakBtn.disabled = false;
          };
          u.onerror = () => {
            speaking = false;
            els.speakBtn.disabled = false;
          };
          window.speechSynthesis.speak(u);
        } catch (e) {
          els.speakBtn.disabled = false;
        }
      }

      // ========= Web Audio UI Sounds =========
      let audioCtx = null;
      function ensureAudioCtx() {
        if (!audioCtx) {
          audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioCtx.state === "suspended") {
          audioCtx.resume();
        }
      }
      function playDing() {
        if (!uiSoundEnabled) return;
        ensureAudioCtx();
        const now = audioCtx.currentTime;
        const gain = audioCtx.createGain();
        gain.connect(audioCtx.destination);
        gain.gain.setValueAtTime(0, now);

        const osc1 = audioCtx.createOscillator();
        osc1.type = "sine";
        osc1.frequency.setValueAtTime(660, now);
        osc1.connect(gain);

        const osc2 = audioCtx.createOscillator();
        osc2.type = "sine";
        osc2.frequency.setValueAtTime(880, now + 0.05);
        osc2.connect(gain);

        gain.gain.linearRampToValueAtTime(0.8, now + 0.01);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.22);

        osc1.start(now);
        osc1.stop(now + 0.18);
        osc2.start(now + 0.05);
        osc2.stop(now + 0.23);
      }
      function playBuzz() {
        if (!uiSoundEnabled) return;
        ensureAudioCtx();
        const now = audioCtx.currentTime;
        const gain = audioCtx.createGain();
        gain.connect(audioCtx.destination);
        gain.gain.setValueAtTime(0, now);

        const osc = audioCtx.createOscillator();
        osc.type = "square";
        osc.frequency.setValueAtTime(120, now);
        osc.frequency.linearRampToValueAtTime(70, now + 0.2);
        osc.connect(gain);

        gain.gain.linearRampToValueAtTime(0.7, now + 0.005);
        gain.gain.linearRampToValueAtTime(0.3, now + 0.08);
        gain.gain.linearRampToValueAtTime(0.0, now + 0.22);

        osc.start(now);
        osc.stop(now + 0.24);
      }

      // ========= Tr·ª£ gi√∫p =========
      function shuffleArray(arr) {
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      function updateHeader() {
        els.progressText.textContent = `C√¢u ${currentIndex + 1}/${
          QUESTIONS.length
        }`;
        els.scoreText.textContent = `ƒêi·ªÉm: ${score}`;
        const progress = currentIndex / QUESTIONS.length;
        els.progressBar.style.width = `${Math.floor(progress * 100)}%`;
      }

      function prepareCurrentQuestion() {
        const q = QUESTIONS[currentIndex];
        const indices = shuffleArray([0, 1, 2, 3]);
        preparedOptions = indices.map((idx, i) => ({
          label: String.fromCharCode(65 + i), // 'A'..'D' theo v·ªã tr√≠ sau x√°o
          text: q.options[idx],
          isCorrect: idx === q.correctIndex,
        }));
      }

      function renderQuestion() {
        answered = false;
        els.feedback.textContent = "";
        els.feedback.className = "feedback";
        els.nextBtn.disabled = true;

        const q = QUESTIONS[currentIndex];
        updateHeader();
        prepareCurrentQuestion();

        els.emoji.textContent = q.emoji;
        els.emoji.setAttribute("aria-label", `Minh h·ªça: ${q.emoji}`);
        els.englishWord.textContent = q.english;

        const speakCurrent = () => speak(q.english);
        els.speakBtn.onclick = speakCurrent;
        els.emoji.onclick = speakCurrent;
        els.englishWord.onclick = speakCurrent;
        els.englishWord.onkeydown = (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            speakCurrent();
          }
        };

        els.answers.innerHTML = "";
        preparedOptions.forEach((opt, idx) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "answer-btn";
          btn.setAttribute("data-index", String(idx));
          btn.innerHTML = `
      <span class="answer-label" aria-hidden="true">${opt.label}</span>
      <span class="answer-text">${opt.text}</span>
    `;
          btn.addEventListener("click", () => handleAnswer(idx));
          btn.addEventListener("keydown", (e) => {
            if ((e.key === "Enter" || e.key === " ") && !answered) {
              e.preventDefault();
              handleAnswer(idx);
            }
          });
          els.answers.appendChild(btn);
        });

        const firstBtn = els.answers.querySelector("button");
        if (firstBtn) firstBtn.focus();

        els.progressBar.style.width = `${Math.floor(
          (currentIndex / QUESTIONS.length) * 100
        )}%`;
      }

      function handleAnswer(idx) {
        if (answered) return;
        answered = true;

        const buttons = Array.from(els.answers.querySelectorAll("button"));
        buttons.forEach((b) => (b.disabled = true));

        const chosen = preparedOptions[idx];
        const isCorrect = chosen.isCorrect;

        const chosenBtn = buttons[idx];
        chosenBtn.classList.add(isCorrect ? "correct" : "incorrect");

        if (!isCorrect) {
          const correctIndex = preparedOptions.findIndex((o) => o.isCorrect);
          if (correctIndex >= 0) {
            buttons[correctIndex].classList.add("correct");
          }
        } else {
          score++;
          els.scoreText.textContent = `ƒêi·ªÉm: ${score}`;
        }

        if (isCorrect) {
          els.feedback.textContent = "ƒê√∫ng r·ªìi!";
          els.feedback.classList.add("ok");
          playDing();
        } else {
          els.feedback.textContent = "Ch∆∞a ƒë√∫ng!";
          els.feedback.classList.add("no");
          playBuzz();
        }

        els.nextBtn.disabled = false;
        els.nextBtn.focus();
      }

      function goNext() {
        if (!answered) return;
        currentIndex++;
        if (currentIndex >= QUESTIONS.length) {
          showEndScreen();
        } else {
          renderQuestion();
        }
      }

      function showEndScreen() {
        els.progressBar.style.width = "100%";
        els.quizCard.classList.add("hidden");
        els.endScreen.classList.remove("hidden");
        els.finalScore.textContent = `B·∫°n ƒë∆∞·ª£c ${score}/${QUESTIONS.length} ƒëi·ªÉm`;

        els.answerKeyBody.innerHTML = "";
        QUESTIONS.forEach((q) => {
          const tr = document.createElement("tr");
          const correctText = q.options[q.correctIndex];
          tr.innerHTML = `
      <td style="font-weight:700">${q.english}</td>
      <td style="font-size:22px">${q.emoji}</td>
      <td>${correctText}</td>
    `;
          els.answerKeyBody.appendChild(tr);
        });
      }

      function restart() {
        currentIndex = 0;
        score = 0;
        answered = false;
        els.endScreen.classList.add("hidden");
        els.quizCard.classList.remove("hidden");
        els.scoreText.textContent = `ƒêi·ªÉm: ${score}`;
        els.progressBar.style.width = "0%";

        // N·∫øu mu·ªën x√°o tr·ªôn th·ª© t·ª± c√¢u h·ªèi khi ch∆°i l·∫°i, b·ªè comment d√≤ng sau:
        // QUESTIONS.sort(() => Math.random() - 0.5);

        renderQuestion();
      }

      // ========= S·ª± ki·ªán giao di·ªán =========
      els.nextBtn.addEventListener("click", goNext);
      els.restartBtn.addEventListener("click", restart);
      els.soundToggle.addEventListener("click", () => {
        uiSoundEnabled = !uiSoundEnabled;
        els.soundToggle.setAttribute(
          "aria-pressed",
          uiSoundEnabled ? "true" : "false"
        );
        els.soundToggle.textContent = uiSoundEnabled
          ? "üîä √Çm thanh"
          : "üîà T·∫Øt √¢m";
      });

      // Kh·ªüi t·∫°o AudioContext sau t∆∞∆°ng t√°c ƒë·∫ßu ti√™n
      document.addEventListener(
        "pointerdown",
        () => {
          if (audioCtx && audioCtx.state === "suspended") audioCtx.resume();
        },
        { once: true }
      );

      // Ph√≠m t·∫Øt: A-D ho·∫∑c 1-4 ƒë·ªÉ ch·ªçn; Enter/Space ƒë·ªÉ ti·∫øp t·ª•c sau khi ƒë√£ ch·ªçn
      document.addEventListener("keydown", (e) => {
        if (!els.endScreen.classList.contains("hidden")) return;

        const key = e.key.toLowerCase();
        const map = { a: 0, b: 1, c: 2, d: 3, 1: 0, 2: 1, 3: 2, 4: 3 };
        if (!answered && key in map) {
          const idx = map[key];
          const btn = els.answers.querySelectorAll("button")[idx];
          if (btn) {
            e.preventDefault();
            btn.click();
          }
        } else if (answered && (e.key === "Enter" || e.key === " ")) {
          e.preventDefault();
          if (!els.nextBtn.disabled) goNext();
        }
      });

      // ========= Load c√¢u h·ªèi t·ª´ JSON =========
      async function loadQuestions() {
        try {
          const response = await fetch("questions.json");
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          QUESTIONS = await response.json();
          console.log(`ƒê√£ load ${QUESTIONS.length} c√¢u h·ªèi t·ª´ file JSON`);

          // Kh·ªüi t·∫°o game sau khi load xong c√¢u h·ªèi
          init();
        } catch (error) {
          console.error("L·ªói khi load c√¢u h·ªèi:", error);
          // Fallback: s·ª≠ d·ª•ng c√¢u h·ªèi m·∫∑c ƒë·ªãnh n·∫øu kh√¥ng load ƒë∆∞·ª£c JSON
          QUESTIONS = [
            {
              english: "water",
              emoji: "üíß",
              options: ["n∆∞·ªõc", "s·ªØa", "n∆∞·ªõc c√¥-ca", "kem"],
              correctIndex: 0,
            },
            {
              english: "milk",
              emoji: "ü•õ",
              options: ["s·ªØa", "n∆∞·ªõc", "n∆∞·ªõc d·ª´a", "n∆∞·ªõc cam"],
              correctIndex: 0,
            },
          ];
          init();
        }
      }

      // ========= Kh·ªüi ƒë·ªông =========
      function init() {
        // N·∫øu TTS kh√¥ng h·ªó tr·ª£, hi·ªÉn th·ªã nh·∫Øc
        if (!ttsSupported) {
          els.ttsFallback.classList.remove("hidden");
        }
        updateHeader();
        renderQuestion();
      }

      // B·∫Øt ƒë·∫ßu load c√¢u h·ªèi
      loadQuestions();
    </script>
  </body>
</html>
